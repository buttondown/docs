import Layout from "../../../components/Layout";
import ResponsesTable from "../../../components/api/ResponsesTable";
import ObjectDescription from "../../../components/api/ObjectDescription";
import ParametersTable from "../../../components/api/ParametersTable";
import ClosedBetaNotice from "../../../components/api/ClosedBetaNotice";
import Endpoint from "../../../components/api/Endpoint";
import DATA from "./metadata.json";

export const meta = {
  title: DATA.title,
};

export default ({ children }) => <Layout meta={meta}>{children}</Layout>;

# Newsletters

## The newsletter object

A newsletter looks like this:

<ObjectDescription
  example={JSON.stringify(DATA.object, null, 4)}
  fields={[
    { field: "creation_date", type: "datetime", description: "" },
    { field: "id", type: "uuid" },
    { field: "description", type: "string" },
    { field: "name", type: "string" },
    { field: "username", type: "string" },
    { field: "api_key", type: "string" },
  ]}
/>

<Endpoint title="Listing newsletters" method="GET" path={DATA.endpoint} />
<ClosedBetaNotice />
<ParametersTable
  content={[
    {
      parameter: "page",
      type: "string",
      description: "A page number within the paginated result set.",
      example: "",
      optional: true,
    },
  ]}
/>
<ResponsesTable
  content={[
    {
      Status: "200",
      description: "",
      "Sample Response": JSON.stringify(
        {
          count: 1,
          next: "foo",
          previous: null,
          results: [DATA.object],
        },
        null,
        4
      ),
    },
  ]}
/>

---

<Endpoint
  title="Creating a new newsletter"
  method="POST"
  path={DATA.endpoint}
/>
<ClosedBetaNotice />
<ParametersTable
  content={[
    {
      parameter: "name",
      type: "string",
      description: "",
      optional: false,
    },
    {
      parameter: "username",
      type: "string",
      description: "",
      optional: false,
    },
    {
      parameter: "description",
      type: "string",
      description: "",
      optional: false,
    },
  ]}
/>
<ResponsesTable
  content={[
    {
      Status: "201",
      description: "",
      "Sample Response": JSON.stringify(DATA.object, null, 4),
    },
  ]}
/>

---

<Endpoint
  title="Retrieving a specific newsletter"
  method="GET"
  path={DATA.endpoint + "/<id>"}
/>
<ClosedBetaNotice />
<ResponsesTable
  content={[
    {
      Status: "200",
      description: "",
      "Sample Response": JSON.stringify(DATA.object, null, 4),
    },
  ]}
/>

---

<Endpoint
  title="Deleting a specific newsletter"
  method="DELETE"
  path={DATA.endpoint + "/<id>"}
/>
<ClosedBetaNotice />
<ResponsesTable
  content={[
    {
      Status: "204",
      description: "",
      "Sample Response": JSON.stringify({}, null, 4),
    },
  ]}
/>

---

<Endpoint
  title="Updating a specific newsletter"
  method="PATCH"
  path={DATA.endpoint + "/<id>"}
/>
<ClosedBetaNotice />
<ResponsesTable
  content={[
    {
      Status: "200",
      description: "",
      "Sample Response": JSON.stringify(DATA.object, null, 4),
    },
  ]}
/>
